---
title: LP02-Python语法基础
author: Xiaojun Sun
date: '2019-04-02'
slug: lp02-python语法基础
categories:
  - Learn Python
tags:
  - Python
output: html_document
---



<p>以下内容主要参考<a href="https://www.jianshu.com/p/04d180d90a3f">《利用Python进行数据分析·第2版》</a></p>
<div id="section" class="section level3">
<h3>类型</h3>
<p>先有类型 (Type)，而后才能生成实例 (Instance)。Python 中的一切都是对象，包括类型在内的每个对象都包含一个标准头，通过头部信息就可以明确知道其具体类型。</p>
<p>Python被认为是强类型化语言，意味着每个对象都有明确的类型。知道对象的类型很重要，最好能让函数可以处理多种类型的输入。你可以用<code>isinstance</code>函数检查对象是某个类型的实例。</p>
</div>
<div id="section-1" class="section level3">
<h3>名字空间</h3>
<p>名字空间是 Python 最核心的内容。Python的名字实际上是一个字符串对象，它和所指向的目标对象一起在名字空间中构成一项 {name: object} 关联。</p>
<p>名字的作用仅仅是在某个时刻与名字空间中的某个对象进行关联。其本身不包含目标对象的任何信息，只有通过对象头部的类型指针才能获知其具体类型，进而查找其相关成员数据。正因为名字的弱类型特征，我们可以在运行期间随时将其关联到任何类型对象。</p>
</div>
<div id="is--" class="section level3">
<h3><code>is</code> 和 <code>==</code> 的区别</h3>
<p>先来看几个例子：</p>
<pre class="python"><code>a = &quot;hello&quot;
b = &quot;hello&quot;
print(a is b)  # 输出 True 
print(a == b)  # 输出 True

a = &quot;hello world&quot;
b = &quot;hello world&quot;
print(a is b)  # 输出 False
print(a == b)  # 输出 True 

a = [1, 2, 3]
b = [1, 2, 3]
print(a is b)  # 输出 False
print(a == b)  # 输出 True 

a = [1, 2, 3]
b = a
print(a is b)  # 输出 True 
print(a == b)  # 输出 True </code></pre>
<p>is 是检查两个对象是否指向同一块内存空间，而 == 是检查他们的值是否相等。</p>
<p>一般情况下，如果 a is b 返回True的话，即 a 和 b 指向同一块内存地址的话，a == b 也返回True，即 a 和 b 的值也相等。只要 a 和 b 的值相等，a == b 就会返回True，而只有 id(a) 和 id(b) 相等时，a is b 才返回 True。</p>
</div>
<div id="section-2" class="section level3">
<h3>导入</h3>
<p>在Python中，模块就是一个有<code>.py</code>扩展名、包含Python代码的文件。假设有以下模块：</p>
<pre class="python"><code># some_module.py
PI = 3.14159

def f(x):
    return x + 2

def g(a, b):
    return a + b</code></pre>
<p>如果想从同目录下的另一个文件访问<code>some_module.py</code>中定义的变量和函数，可以：</p>
<pre class="python"><code>import some_module
result = some_module.f(5)
pi = some_module.PI</code></pre>
<p>或者：</p>
<pre class="python"><code>from some_module import f, g, PI
result = g(5, PI)</code></pre>
<p>使用<code>as</code>关键词，你可以给引入起不同的变量名：</p>
<pre class="python"><code>import some_module as sm
from some_module import PI as pi, g as gf

r1 = sm.f(pi)
r2 = gf(6, pi)</code></pre>
</div>
<div id="section-3" class="section level3">
<h3>可变与不可变对象</h3>
<p>Python中的大多数对象，比如列表、字典、NumPy数组、用户定义的类型（类），都是可变的。这意味着这些对象或包含的值可以被修改：</p>
<pre class="python"><code>a_list = [&#39;foo&#39;, 2, [4, 5]]

a_list[2] = (3, 4)</code></pre>
<p>其它的，例如字符串和元组，是不可变的：</p>
<pre class="python"><code>In [1]: a_tuple = (3, 5, (4, 5))

In [2]: a_tuple[1] = &#39;four&#39;
---------------------------------------------------------------------------
TypeError: &#39;tuple&#39; object does not support item assignment</code></pre>
<p>记住，可以修改一个对象并不意味就要修改它。这被称为<em>副作用</em>。例如，当写一个函数，任何副作用都要在文档或注释中写明。如果可能的话，我推荐避免副作用，采用不可变的方式，即使要用到可变对象。</p>
</div>
<div id="section-4" class="section level3">
<h3>控制流</h3>
<div id="ifelifelse" class="section level4">
<h4>if、elif和else</h4>
<pre class="python"><code># 直接看例子
if x &lt; 0:
    print(&#39;It&#39;s negative&#39;)
elif x == 0:
    print(&#39;Equal to zero&#39;)
elif 0 &lt; x &lt; 5:
    print(&#39;Positive but smaller than 5&#39;)
else:
    print(&#39;Positive and larger than or equal to 5&#39;)</code></pre>
</div>
<div id="for" class="section level4">
<h4>for循环</h4>
<p>for循环是在一个集合（列表或元组）中进行迭代。可以用<code>break</code>跳出for循环。</p>
<pre class="python"><code>sequence = [1, 2, None, 4, None, 10]
total = 0
for value in sequence:
    if value is None:
        continue
    if value==10:
          break
    total += value</code></pre>
<p>循环语句可能带有一个 <code>else</code> 子句；它会在循环遍历完列表 (使用 <code>for</code>) 或是在条件变为假 (使用 <code>while</code>) 的时候被执行，但是不会在循环被 <a href="https://docs.python.org/zh-cn/3/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops"><code>break</code></a> 语句终止时被执行。</p>
<pre class="python"><code>for n in range(4, 6):
    for w in range(2, n):
        if n % w == 0:
            print(n, &#39;=&#39;, w, &#39;*&#39;, n // w)
            break
    else:
        # loop fell through without finding a factor
        print(n, &#39;is a prime number&#39;)</code></pre>
<p>如果在循环内需要修改序列中的值（比如重复某些选中的元素），推荐你先拷贝一份副本，切片操作使这件事非常简单：</p>
<pre class="python"><code>for w in words[:]:  # Loop over a slice copy of the entire list.
    if len(w) &gt; 6:
    words.insert(0, w)</code></pre>
<p>如果写成 <code>for w in words:</code>，这个示例就会创建无限长的列表。</p>
</div>
<div id="while" class="section level4">
<h4>while循环</h4>
<pre class="python"><code>x = 256; total = 0
while x &gt; 0:
    if total &gt; 500:
        break
    total += x
    x = x//2</code></pre>
</div>
<div id="continue" class="section level4">
<h4>continue</h4>
<p><a href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#continue"><code>continue</code></a> 在语法上只会出现于<code>for</code>或 <code>while</code> 循环所嵌套的代码，它会继续执行最近的外层循环的下一个轮次。</p>
<pre class="python"><code>for n in range(3, 6):
    if n % 2 == 0:
        print(&#39;Find a even number: &#39;, n)
        continue
    print(&#39;Find a odd number: &#39;, n)</code></pre>
</div>
<div id="pass" class="section level4">
<h4>pass</h4>
<p>pass是Python中的非操作语句。代码块不需要任何动作时可以使用（作为未执行代码的占位符） 。</p>
<pre class="python"><code>if x &lt; 0:
    print(&#39;negative!&#39;)
elif x == 0:
    pass
else:
    print(&#39;positive!&#39;)</code></pre>
</div>
<div id="range" class="section level4">
<h4>range</h4>
<p>range函数返回一个迭代器，它产生一个均匀分布的整数序列，比如：<code>range(10)</code>，<code>range(0, 20, 2)</code>。</p>
<pre class="python"><code>for i in range(5):
    print(i)</code></pre>
</div>
<div id="section-5" class="section level4">
<h4>三元表达式</h4>
<p>Python中的三元表达式可以将if-else语句放到一行里。</p>
<pre class="python"><code>value = true-expr if condition else false-expr</code></pre>
</div>
</div>
<div id="section-6" class="section level3">
<h3>文件和操作系统</h3>
<div id="section-7" class="section level4">
<h4>文件的读写和关闭</h4>
<pre class="python"><code>f=open(&#39;somefile.txt&#39;)
f.readline()#表示读文件的一行
f.readlines()#表示把文件从头到尾都读出来，并保存为一个列表
#使用文件应该牢记关闭
f.close()
#更推荐下面这种方法，因为它会自动帮你关闭文件
with open(r&#39;somefile.txt&#39;) as f:
    f.readlines()
#写入
f.write()#表示把字符串写入
f.writelines()#表示把一个列表写入</code></pre>
<p><img src="http://ww1.sinaimg.cn/large/748b26cfly1g1nicb5l0nj20jg069dhg.jpg" /></p>
</div>
<div id="os" class="section level4">
<h4>os模块</h4>
<p><a href="https://python101.pythonlibrary.org/chapter16_os.html">os模块</a>提供了一种方便的使用操作系统函数的方法。</p>
<pre class="python"><code>import os
#假设在当前的目录下有一个abc.txt
#重命名文件
os.rename(&#39;abc.txt&#39;,&#39;a123.txt&#39;)
#删除文件
if os.path.exists(&#39;a123.txt&#39;):
  os.remove(&#39;a123.txt&#39;)
#文件路径的处理
#假设有一个文件路径：path=&#39;/users/Python/Data/info.txt&#39;
print os.path.dirname(path)
#分割文件名
print os.path.basename(path)
#分割文件的后缀
print os.path.split(path) #(&#39;/users/Python/Data&#39;, &#39;info.txt&#39;)
#创建目录
os.mkdir(&#39;test01&#39;)#在当前目录下创建一个test01目录
os.mkdir(&#39;test02&#39;)#在当前目录下创建一个test02目录
#最后先判断目录是否存在
if not os.path.exists(&#39;test01&#39;):
    os.mkdir(&#39;test01&#39;)
#列出当前目录下的所有文件和文件夹
print os.listdir(&#39;.&#39;)
print list(os.walk(&#39;.&#39;)) 
#返回当前的目录
print os.getcwd()
#删除目录，目录不为空时会报错
os.rmdir(&#39;test02&#39;)
#shutil模块可以删除非空目录
shutil.rmtree(&#39;test02&#39;)
#判断是否为文件
print os.path.isfile(&#39;test01&#39;)
#判断是否为目录
print os.path.isdir(&#39;test01&#39;)
#判断文件或者目录是否存在
print os.path.exists(&#39;demo_file.py&#39;)</code></pre>
</div>
</div>
